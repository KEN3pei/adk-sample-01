### 環境構築

1. python3.14 -m venv venv
2. source venv/bin/activate
3. pip install -r requirements.txt

### tool

1. OpenAPI Specification（OAS）形式のファイルを読み取って呼び出し可能にするツールをセットする。

OpenAPIToolsetはGoが対応していない。

- <https://google.github.io/adk-docs/tools-custom/openapi-tools/>

### Postman × OAS

1. Export Json
2. npx postman-to-openapi@3.0.1 ./voice-todo-api.postman_collection.json -f ./openapi.json

### parameter

USER_ID_OPENAPI:

- ユーザーの識別子
- ユーザーごとに生成するID。分けないと会話履歴が混ざる。

SESSION_ID_OPENAPI:

- 会話セッションの識別子
- 1つの会話のやり取り(セッション)を識別
- 同じユーザーでも、新しい会話を始めるたびに新しいセッションIDが作られる

### 気になること

**API仕様書をそのまま読み込ませてtoolにしたいができる？**

1. 直接コードで実装する

Goの関数としてREST APIを呼び出すロジックを書き、それをADKの「Tool」として登録する方法。

1. MCP（Model Context Protocol）を活用する。

RestAPIの内容を返すMCPサーバを立てておいて、Ai AgentからはMCP連携するだけという形にする方法。

| 比較項目 | ADKで直接ツール定義 | MCPサーバー経由 |
|--------|------------------|---------------|
| アーキテクチャ | 密結合（エージェント内にロジックを内包） | 疎結合（エージェントとツールを分離） |
| 開発コスト | 低い：Goの関数を一つ書くだけで完了 | 高い：MCPプロトコル準拠のサーバー構築が必要 |
| 再利用性 | 低い：他のAIプラットフォームでは使えない | 非常に高い：IDEや他社AIツールでも使い回せる |
| デプロイ単位 | エージェントと一括で更新・デプロイ | サーバー単体で更新・デプロイが可能 |
| 実行パフォーマンス | 最高：同一プロセス内での関数呼び出し | 普通：ネットワーク/プロセス間通信が発生 |
| セキュリティ管理 | IAMや環境変数でシンプルに制御可能 | MCPサーバーへの認証が別途必要になる |
| 保守性 | コードが1箇所にまとまり把握しやすい | ツールが増えてもエージェント側が肥大化しない |
| 最適なケース | 特定用途のAIを素早く開発したい時 | 社内共通のツール基盤を作りたい時 |

### Ai Agent Story

|

| シナリオ(or実際の指示) | 期待する動作 |
| ----- | ----- |
| リストAにtest~で連番のタスクを3つ作って | リストAのIDを特定, そのIDを指定してCreateTaskAPI呼び出し×3 |
| リストAの上位3つのタスクの更新日を、1週間後にして | 1週間後の日時を特定, リストA上位の3タスクのIDを特定, そのIDでUpdateTaskを3回呼び出し |
| 空のタスクを作って | どこに？という情報がないため実行できません。などと失敗を返す |
| リストを3つ作成して | 適当な名前でList作成APIを3回呼び出し |
| 全てのタスクのdescriptionに以下テキストを入力して | 全てのタスクID取得, 全タスク回数分UpdateTaskを同じdescriptionになるよう更新。|
| リストAのタスクをリストBに移動させて | リストAのタスクをリストB煮付け変える更新APIをタスクの数だけ実行 |
| タスクA, Bを一番最初に移動させて | タスクA,BのIDを特定, それらを並び替えAPIで一番最初に変更する。|

処理の共通点

1. まずTask操作かList操作か,もしくは両方かで処理が別れる
2. 大体どのTask,Listを操作したいのかIDを特定する必要がある。新規作成のみこれに該当しない。
3. どのTask,Listにどういった操作をしたいのか、を特定する。


